import {render as O} from 'react-dom';
import {parse as P} from 'query-string';
import {createElement as č, useState as û, useEffect as ū, useRef} from 'react';
let [{innerHeight: í, innerWidth: ì, location: L}, b] = [window, 'background'];
let [{search: S}, {floor: f, random: r, sqrt: q}, Ë] = [L, Math, 'green'];
let [{delay: d, cellcount: c}, t, ß] = [P(S), (x, p) => f((x - 1) / p), '50px'];
let [ø, z] = [(Y, X) => t(X, W) + 1 && t(Y, H) + 1, f(q((í * ì) / (c || 999)))];
let [R, C, ë, e] = [f(í / z), f(ì / z), 'red', [0, 1, 2, 3, 5, 6, 7, 8]];
let [Ÿ, ÿ, W, H, D] = ['black', 'white', f(ì / C), f(í / R), () => d || 100];
let [š, h, w] = [(x, y) => [x * W, y * H, W, H], H * R, W * C];
let [I, J, [G, i, g, F, Z]] = ['width', 'height', []];
let l = [...Array(R)].map(() => [...Array(C)].map(() => f(r() * 2)));
let ö = (Y, X) => (l[t(Y, H)][t(X, W)] = !l[t(Y, H)][t(X, W)]);
let [ê, V] = [(i, d, X) => i + (d % 3) && i + (d % 3) <= X, {[I]: w, [J]: h}];
let ė = (z, i, d, j) => [...z, {x: i + (d % 3) - 1, y: j + f(d / 3) - 1}];
let E = (z, i, d, j) => (ê(i, d, R) && ê(j, d, C) ? ė(z, i, d, j) : z);
let k = l.map((r, i) => r.map((_, j) => e.reduce((z, d) => E(z, i, d, j), [])));
let ñ = (i, j) => k[i][j].reduce((a, {x, y}) => a + l[x][y], 0);
let ń = (i, j, s) => (s ? ñ(i, j) < 4 && ñ(i, j) > 1 : ñ(i, j) === 3);
let Š = (x, y, f) => [(Z.fillStyle = f ? Ÿ : ÿ), Z.fillRect(...š(x, y))];
let M = (i, j, s) => [ń(i, j, s), ń(i, j, s) !== s && Š(j, i, ń(i, j, s))][0];
let [ç, œ] = [() => l.map((r, i) => r.map((s, j) => M(i, j, s))), 'onClick'];
let ł = ({clientX: X, clientY: Y}) => ø(Y, X) && Š(t(X, W), t(Y, H), ö(Y, X));
let [ã, â] = [() => F.current.getContext('2d'), [() => g && (l = ç()), D()]];
let å = () => [([Z, i] = [ã(), setInterval(...â)]), () => clearInterval(i)][1];
let ä = () => ([[g, G], F, e] = [û(true), useRef(0), ū(å, [g, F])]);
let [s, Ś] = [{position: 'fixed', top: ß, left: `${ì - 99}px`}, 'style'];
let á = g => ({[œ]: () => G(!g), [Ś]: {...s, [J]: ß, [I]: ß, [b]: g ? ë : Ë}});
let æ = g => [č('button', á(g)), č('canvas', {...V, ref: F, [œ]: ł})];
O(č(() => [ä(), č('div', 0, ...æ(g))][1]), document.getElementById('root'));
