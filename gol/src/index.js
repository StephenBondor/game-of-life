import {render as O} from 'react-dom';
import {parse as P} from 'query-string';
import {createElement as č, useState as û, useEffect as ū, useRef} from 'react';
let [{innerHeight: í, innerWidth: ì, location: L}, b] = [window, 'background'];
let [{search: S}, {floor: f, random: r, sqrt: q}, Ë] = [L, Math, 'green'];
let [{delay: d, cellcount: c}, t, ß] = [P(S), (x, p) => f((x - 1) / p), '50px'];
let [ø, z] = [(Y, X) => t(X, W) + 1 && t(Y, H) + 1, f(q((í * ì) / (c || 999)))];
let [R, C, ë, e, Ø] = [f(í / z), f(ì / z), 'red', [0, 1, 2, 3, 5, 6, 7, 8], []];
let [Ÿ, ÿ, W, H, D] = ['black', 'white', f(ì / C), f(í / R), () => d || 100];
let [š, Ä] = [(x, y) => [x * W, y * H, W, H], a => [...Array(a)]];
let [l, h, w] = [Ä(R).map(() => Ä(C).map(() => f(r() * 2))), H * R, W * C];
let ö = (Y, X) => (l[t(Y, H)][t(X, W)] = !l[t(Y, H)][t(X, W)]);
let ė = ({z, i, d, j}) => [...z, {x: i + (d % 3) - 1, y: j + f(d / 3) - 1}];
let E = a => (ê(a.i + (a.d % 3), R) && ê(a.j + (a.d % 3), C) ? ė(a) : a.z);
let [Ę, ê] = [q => [(z, d) => E({z, d, ...q}), Ø], (q, X) => q && q <= X];
let k = l.map((r, i) => r.map((_, j) => e.reduce(...Ę({i, j}))));
let ñ = (j, i) => k[i][j].reduce((a, {x, y}) => a + l[x][y], 0);
let [ń, I, J] = [(n, s) => (s ? n < 4 && n > 1 : n === 3), 'width', 'height'];
let Š = (x, y, f) => (Z.fillStyle = f ? Ÿ : ÿ) && Z.fillRect(...š(x, y));
let [M, [G, i, g, F, Z]] = [(n, s, j, i) => [n, n !== s && Š(j, i, n)], Ø];
let ç = () => l.map((r, i) => r.map((s, j) => M(ń(ñ(j, i), s), s, j, i)[0]));
let ł = ({clientX: X, clientY: Y}) => ø(Y, X) && Š(t(X, W), t(Y, H), ö(Y, X));
let [ã, â] = [() => F.current.getContext('2d'), [() => g && (l = ç()), D()]];
let å = () => [([Z, i] = [ã(), setInterval(...â)]), () => clearInterval(i)][1];
let [ä, œ] = [() => ([[g, G], F, e] = [û(1), useRef(0), ū(å, Ø)]), 'onClick'];
let [s, Ś] = [{position: 'fixed', top: ß, left: `${ì - 99}px`}, 'style'];
let á = g => ({[œ]: () => G(!g), [Ś]: {...s, [J]: ß, [I]: ß, [b]: g ? ë : Ë}});
let æ = g => [č('button', á(g)), č('canvas', {[I]: w, ref: F, [œ]: ł, [J]: h})];
O(č(() => [ä(), č('div', 0, ...æ(g))][1]), document.getElementById('root'));
